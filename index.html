<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Korg's Paper Rebellion</title>
</head>
<body>
  <div id="container"></div>
  <br>

  <button id="btnR"></button>
  <button id ="btnP"></button>
  <button id ="btnS"></button>

  <br><br>
  <div id="results"></div>
  
  <div class="scores">
    Computer <span id="compCount">0</span> 
    : Player <span id="playerCount">0</span>
  </div>
  <script>
    
    let array = ["Rock", "Paper", "Scissors"]
    function getComputerChoice(array) {
      const randomIndex = Math.floor(Math.random() * array.length);
      const item = array[randomIndex];
      return item;
    }

    let playerWins = 0;
    let computerWins = 0;
    let compCount = 0;
    let playerCount = 0;
  
    // original logic for player vs computer RPS
    function thegame() {
      if (playerSelection == "Rock") {
        if (computerSelection == "Paper") {
          computerWins++;
          return "You lose, sucka!"}
        else if (computerSelection == "Scissors") {
          playerWins++;
          return "You win! Woohoo!"}
        else {
          return "Nice try, but it's a tie!"}
      }

      if (playerSelection == "Paper") {
        if (computerSelection == "Scissors") {
          computerWins++;
          return "You lose, sucka!"}
        else if (computerSelection == "Rock") {
          playerWins++;
          return "You win! Woohoo!"}
        else {
          return "Nice try, but it's a tie!"}
      }

      if (playerSelection == "Scissors") {
        if (computerSelection == "Rock") {
          computerWins++;
          return "You lose, sucka!"}
        else if (computerSelection == "Paper") {
          playerWins++;
          return "You win! Woohoo!"}
        else {
          return "Nice try, but it's a tie!"}
      }
    }

    // check for winner
    function whoWins(playerCount, compCount) {
      if (textHolder2.innerHTML > textHolder1.innerHTML) {
        return "You beat the computer! Humanity is still safe from machine overlords."
      }
      else if (textHolder1.innerHTML > textHolder2.innerHTML) {
        return "Oh no! The computer won and now all of humanity is doomed. Get to the choppa!"
      }
      else if (textHolder1.innerHTML == textHolder2.innerHTML) {
        return "Somehow it's a draw! This shouldn't be happening... ¯\_(ツ)_/¯"
      }
    }



    /*while (playerWins <5 || computerWins < 5) {
      //Determine the winner of thegame function
      alert = whoWins(playerWins, computerWins);;
    }

     loop game until playerWins == 5 or computerWins == 5
    display results of function whoWins once playerWins == 5 or computerWins == 5

    while (playerWins < 5 || computerWins < 5) {
      
    }*/
    

    // console.log(whoWins(playerWins, computerWins));

    const container = document.querySelector('#container');
    const content = document.createElement('div');
    content.classList.add('content');
    content.textContent = 'To play in Korg\'s game, please pick from one of the following:';

    container.appendChild(content);
    
    const btnRock = document.querySelector('#btnR');
    btnRock.textContent = 'Rock';

    const btnPaper = document.querySelector('#btnP');
    btnPaper.textContent = 'Paper';

    const btnScissors = document.querySelector('#btnS');
    btnScissors.textContent = 'Scissors';

    const gameResults = document.createElement('results');
    gameResults.classList.add('gameResults');
    gameResults.textContent = "Your result will be displayed here"
    
    const textHolder1 = document.getElementById('compCount');
    const textHolder2 = document.getElementById('playerCount');
    textHolder1.innerHTML = compCount;
    textHolder2.innerHTML = playerCount;

    btnRock.addEventListener('click', () => {
      playerSelection = btnRock.textContent; 
      computerSelection = getComputerChoice(array);
      gameResults.textContent = (thegame(playerSelection, computerSelection));
      if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
        alert(whoWins());
      } else if (gameResults.textContent == "You win! Woohoo!") {
        textHolder2.innerHTML = ++playerCount;
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          }
      } else if (gameResults.textContent == "You lose, sucka!") {
        textHolder1.innerHTML = ++compCount;
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          }
      }
    });

    btnPaper.addEventListener('click', () => {
      playerSelection = btnPaper.textContent; 
      computerSelection = getComputerChoice(array);
      gameResults.textContent = (thegame(playerSelection, computerSelection));
      if (gameResults.textContent == "You win! Woohoo!") {
        textHolder2.innerHTML = ++playerCount; 
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          } // checks score tally after each click to decide if one score has met winning conditions
      } else if (gameResults.textContent == "You lose, sucka!") {
        textHolder1.innerHTML = ++compCount;
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          }
      }
    })

    btnScissors.addEventListener('click', () => {
      playerSelection = btnScissors.textContent; 
      computerSelection = getComputerChoice(array);
      gameResults.textContent = (thegame(playerSelection, computerSelection));
      if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
        alert(whoWins());
      } else if (gameResults.textContent == "You win! Woohoo!") {
        textHolder2.innerHTML = ++playerCount;
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          }
      } else if (gameResults.textContent == "You lose, sucka!") {
        textHolder1.innerHTML = ++compCount;
          if (textHolder2.innerHTML == 5 || textHolder1.innerHTML == 5) {
          alert(whoWins());
          }
      }
    }) 

    const score = document.createElement('score');
    score.classList.add('score');
    score.textContent = `The current score is: `

    function declareWinner(playerCount, compCount) {
      if (playerCount == 5 || compCount == 5) {
        alert(whoWins());
      }
    }
    /*let i = 0
    
    do {
      if (playerCount == 5 || compCount == 5) {
        alert(whoWins());
      };
      i++;
    } while (i < 10000)

    declareWinner(textHolder2.innerHTML, textHolder1.innerHTML);*/

    results.appendChild(gameResults);
    results.appendChild(document.createElement("br"));
    results.appendChild(score);

    /*function tallyScore(playerWins, computerWins) {
      scoreWindow.innerText = `Player ${playerWins} : Computer ${computerWins}`;
    }*/
  

  </script>
</body>
</html>